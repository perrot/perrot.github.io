<!--from:https://codepen.io/SteveJRobertson/pen/emGWaR-->
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.95.1/js/materialize.min.js"></script>
</head>
<body>
<script>
$(function(){
  if ('speechSynthesis' in window) {
    speechSynthesis.onvoiceschanged = function() {
      var $voicelist = $('#voices');

      if($voicelist.find('option').length == 0) {
        speechSynthesis.getVoices().forEach(function(voice, index) {
          var $option = $('<option>')
          .val(index)
          .html(voice.name + (voice.default ? ' (default)' :''));

          $voicelist.append($option);
        });

        $voicelist.material_select();
      }
    }
function shuffle(a) {
    var j, x, i;
    for (i = a.length - 1; i > 0; i--) {
        j = Math.floor(Math.random() * (i + 1));
        x = a[i];
        a[i] = a[j];
        a[j] = x;
    }
    return a;
}
var generalBodyMoves=[
"stand up ",
"sit down ",
"walk ",
"stop ",
"turn left ",
"turn right ",
"turn around ",
"walk backwards ",
"jump ",
"hop ",
"bend over ",
"squat ",
"walk 3 steps",
"walk 5 steps",
"walk 10 steps",
"face me",
"face the wall ",
"face the door",
"lift up your right leg ",
"lift up your left leg ",
"lift up your right arm",
"lift up your left arm",
"lower your right arm",
"lower your right leg",
"lower your left leg",
"lower your left arm",
"shake my hand ",
"kiss me on the cheek! ",
"make a fist ",
"clap your hands ",
"snap your fingers ",
"wave "
	];
var facialThings=[
"smile ",
"cough ",
"laugh ",
"cry ",
"sneeze ",
"open your mouth ",
"close your mouth ",
"stick out your tongue ",
"put your tongue back in ",
"wink ",
"blink ",
"wiggle your nose "
	];
var partsOfTheBody=[
"touch your hair",
"touch your forehead",
"touch your eyebrow",
"touch your eyelash",
"touch your eye",
"touch your ear",
"touch your cheek",
"touch your nose",
"touch your lip",
"touch your mouth",
"touch your moustache",
"touch your beard",
"touch your chin",
"touch your throat",
"touch your tooth",
"touch your tongue",
"touch your chest",
"touch your back",
"touch your shoulder",
"touch your belly",
"touch your arm",
"touch your leg",
"touch your thigh",
"touch your shin",
"touch your hand",
"touch your finger",
"touch your thumb",
"touch your knuckle",
"touch your fingernail",
"touch your elbow",
"touch your knee",
"touch your foot",
"touch your ankle",
"touch your toe"
];

  var kitchenTableStuff=[
"cup ",
"plate ",
"bowl ",
"knife ",
"fork ",
"spoon ",
"napkin",
"tissue ",
"dish ",
"big round serving tray ",
"tray youâ€™d serve tea or coffee on ",
"table ",
"chair "
];

var verbs=[
"where is the %s",
"touch the %s",
"show me the %s",
"pick up the %s",
"put down the %s",
"Put the %s there|put the %s back",
"Put the %s there|return the %s",
"drop the %s",
"move the %s",
"give me the %s|take the %s back",
"throw the %s",
"catch the %s",
"turn over the %s",
"flip the %s",
"put the %s on the table",
"put the %s on the chair",
"put the %s under the table",
"put the %s under the chair",
"push the %s",
"pull the %s",
"lift the %s"
];
var kitchenStuff =[
"pan ",
"oven ",
"stove ",
"sink ",
"faucet ",
"counter ",
"cupboard ",
"refrigerator "
];

var basicFoods=[
"flour ",
"sugar ",
"bread ",
"tea leaves ",
"coffee grounds ",
"rice ",
"nuts ",
"yogurt ",
"candy"
];
var drinks=[
"water ",
"milk ",
"juice ",
"soda ",
"yogurt",
"coffee ",
"tea "
];
var fruitsVegetables=[
"apple ",
"banana ",
"orange ",
"plum ",
"grapes ",
"fig ",
"dates ",
"raisons ",
"lemon ",
"pomegranate ",
"watermelon ",
"tomato ",
"cucumber ",
"zucchini ",
"onion ",
"carrot ",
"eggplant ",
"small eggplant ",
"potato ",
"garlic ",
"parsley ",
"lettuce ",
"grape leaves ",
"celery ",
"mint ",
"cabbage"
];
var livingRoom=[
"sofa ",
"chair ",
"pillow ",
"coffee table ",
"rug ",
"carpet ",
"cushion ",
"window ",
"curtain ",
"lamp ",
"ceiling light ",
"light switch ",
"electrical plug ",
"phone plug ",
"telephone ",
"telephone cord ",
"television ",
"bookcase "
];
var bedroom=[
"bed ",
"sheet ",
"pillow ",
"blanket ",
"dresser ",
"closet ",
"coat hanger ",
"mirror "
];
var bathroom=[
"toilet ",
"bathtub ",
"toilet paper ",
"sink ",
"towel ",
"shower curtain ",
"toothbrush ",
"toothpaste ",
"comb ",
"plunger ",
"shampoo ",
"deodorant "
];
var householdItems=[
"light bulb ",
"hammer ",
"screwdriver ",
"screw ",
"wrench ",
"pliers ",
"broom ",
"mop ",
"dustpan ",
"sweep the floor ",
"mop the floor ",
"trash can ",
"trash bag ",
"washing machine ",
"dryer ",
"iron ",
"ironing board ",
"clothes pin "
];
var clothing=[
"shirt ",
"pants ",
"shoe ",
"shoes ",
"coat ",
"underwear ",
"sock ",
"socks ",
"watch ",
"sweater ",
"hat ",
"belt ",
"dress shirt ",
"tie ",
"dress ",
"skirt ",
"blouse "
];
var office=[
"office ",
"desk ",
"computer ",
"keyboard ",
"monitor ",
"printer ",
"mouse ",
"printer cable ",
"voltage regular ",
"power cord ",
"disk drive ",
"floppy disk ",
"paper ",
"modem ",
"fax machine ",
"scanner ",
"shredder "
];
    $('#category').change(function(){
    var cat=document.getElementById("category").value;
	    arr=[];
	    index=-1;
	    console.log("you select "+cat);
	  switch(cat){
			  case "move":
		      buildWords(generalBodyMoves);
			  break;
			  case "face":
		      buildWords(facialThings);
			  break;
		  case "kitchenTable":
		      buildActionWords(kitchenTableStuff);
		      break;
	          case "body":
		      buildWords(partsOfTheBody);
		      break;
		  case "kitchenStuff":
		      buildActionWords(kitchenStuff);
		      break;
		case "basicFoods":
		      buildActionWords(basicFoods);
		      break;
		case "drinks":
		      buildActionWords(drinks);
		      break;
		case "fruitsVegetables":
		      buildActionWords(fruitsVegetables);
		      break;
		case "livingRoom":
		      buildActionWords(livingRoom);
		      break;
		case "bedroom":
		      buildActionWords(bedroom);
		      break;
		case "bathroom":
		      buildActionWords(bathroom);
		      break;
		case "householdItems":
		      buildActionWords(householdItems);
		      break;
		case "clothing":
		      buildActionWords(clothing);
		      break;
		case "office":
		      buildActionWords(office);
		      break;
	  }
    });

function buildActionWords(stuff){
  console.log("buildActionWords...");
  shuffle(verbs);
  for(i=0;i<verbs.length;i++){
  	shuffle(stuff);
      for(j=0;j<stuff.length;j++){
	if(verbs[i].indexOf("|")>-1){
		var parts=verbs[i].split("|");
		  arr.push(parts[0].replace("%s",stuff[j]));
		  arr.push(parts[1].replace("%s",stuff[j]));
	}else{
		  arr.push(verbs[i].replace("%s",stuff[j]));
	}
      }
  }
	console.log("arr...");
	if(arr.length>MAX_ARR_SIZE){
	console.log("arr");
	console.log(arr.length);
		arr.splice(MAX_ARR_SIZE, arr.length-MAX_ARR_SIZE);
	console.log(arr.length);
	console.log("arr end");
	}
	//console.log(arr);
}
function buildWords(ar){
	console.log("buildWords...");
	if(ar.length>MAX_ARR_SIZE){
		ar.splice(MAX_ARR_SIZE, ar.length-MAX_ARR_SIZE);
	}
	 shuffle(ar);
	 arr=ar;
	console.log(arr);
}
//arr=generalBodyMoves.concat(facialThings).concat(partsOfTheBody);
    $('#shuffle').click(function(){
	    $('#index').val('shuffle...');
	    shuffle(arr);
	    index=-1;
	    $('#index').val('shuffled');
    })
    $('#showword').click(function(){
      var text =arr[index];// $('#message').val();
	    $('#index').val(text);
    })
    $('#playagain').click(function(){
      var text =arr[index];// $('#message').val();
      var msg = new SpeechSynthesisUtterance();
      var voices = window.speechSynthesis.getVoices();
      msg.voice = voices[$('#voices').val()];
      msg.rate = $('#rate').val() / 10;
      msg.pitch = $('#pitch').val();
      msg.text = text;

      msg.onend = function(e) {
        console.log('Finished in ' + event.elapsedTime + ' seconds.');
      };

      speechSynthesis.speak(msg);
    })
var index=-1;
var arr=[];
var MAX_ARR_SIZE=20;
//inital words
buildWords(generalBodyMoves);
    $('#speaktpr').click(function(){
index++;
	    console.log(arr.length);
//var i=Math.floor(Math.random() * arr.length)
	    $('#index').val(index+"/"+arr.length)
      var text =arr[index];// $('#message').val();
      var msg = new SpeechSynthesisUtterance();
      var voices = window.speechSynthesis.getVoices();
      msg.voice = voices[$('#voices').val()];
      msg.rate = $('#rate').val() / 10;
      msg.pitch = $('#pitch').val();
      msg.text = text;

      msg.onend = function(e) {
        console.log('Finished in ' + event.elapsedTime + ' seconds.');
      };

      speechSynthesis.speak(msg);
    })
    $('#speak').click(function(){
      var text = $('#message').val();
      var msg = new SpeechSynthesisUtterance();
      var voices = window.speechSynthesis.getVoices();
      msg.voice = voices[$('#voices').val()];
      msg.rate = $('#rate').val() / 10;
      msg.pitch = $('#pitch').val();
      msg.text = text;

      msg.onend = function(e) {
        console.log('Finished in ' + event.elapsedTime + ' seconds.');
      };

      speechSynthesis.speak(msg);
    })
  } else {
    $('#modal1').openModal();
  }
});
</script>
<link rel="stylesheet" href="http://cdnjs.cloudflare.com/ajax/libs/materialize/0.95.1/css/materialize.min.css">
<div class="container">
	
  <div class="row">
    <nav>
      <div class="nav-wrapper">
        <div class="col s12">
          <a href="#" class="brand-logo">Text to speech example</a>
        </div>
      </div>
    </nav>
  </div>
  <form class="col s8 offset-s2">
    <div class="row">
      <label>Choose voice</label>
      <select id="voices"></select>
    </div>
    <div class="row">
      <div class="col s6">
        <label>Rate</label>
        <p class="range-field">
          <input type="range" id="rate" min="1" max="100" value="10" />
        </p>
      </div>
      <div class="col s6">
        <label>Pitch</label>
        <p class="range-field">
          <input type="range" id="pitch" min="0" max="2" value="1" />
        </p>
      </div>
      <div class="col s12">
        <p>N.B. Rate and Pitch only work with native voice.</p>
      </div>
    </div>
    <div class="row">
      <div class="input-field col s12">
        <textarea id="message" class="materialize-textarea"></textarea>
        <label>Write message</label>
      </div>
    </div>
    <a href="#" id="speak" class="waves-effect waves-light btn">Speak</a>
    <a href="#" id="speaktpr" class="waves-effect waves-light btn">TPR Speak</a>
    <a href="#" id="shuffle" class="waves-effect waves-light btn">Shuffle</a>
        <textarea id="index" class="materialize-textarea"></textarea>
	<br/>
	<h3>HINT</h3>
    <a href="#" id="playagain" class="waves-effect waves-light btn">1. Play again</a>
	<br/>
    <a href="#" id="showword" class="waves-effect waves-light btn">2. Show word</a>
  </form>  
  <hr/>

<select id="category" style="display:block !important">
  <option value="move">General body movements</option>
  <option value="face">Facial things</option>
  <option value="body">Parts of the body</option>
  <option value="kitchenTable">Kitchen table stuff</option>
  <option value="kitchenStuff">Kitchen stuff</option>
  <option value="basicFoods">Basic Foods</option>
  <option value="drinks">Drinks</option>
  <option value="fruitsVegetables">Fruits Vegetables</option>
  <option value="livingRoom">Living Room</option>
  <option value="bedroom">Bedroom</option>
  <option value="bathroom">Bathroom</option>
  <option value="householdItems">Household Items</option>
  <option value="clothing">Clothing</option>
  <option value="office">Office</option> 
</select>

  <h3>1Learn Words</h3>
  <a href="#" id="generalBodyMoves" class="waves-effect waves-light btn">General body movements</a><br/>
  <a href="#" id="facialThings" class="waves-effect waves-light btn">Facial things</a><br/>
  <a href="#" id="partsOfTheBody" class="waves-effect waves-light btn">Parts of the body</a><br/>
</div>

<div id="modal1" class="modal">
  <h4>Speech Synthesis not supported</h4>
  <p>Your browser does not support speech synthesis.</p>
  <p>We recommend you use Google Chrome.</p>
  <div class="action-bar">
    <a href="#" class="waves-effect waves-green btn-flat modal-action modal-close">Close</a>
  </div>
</div>
</body>


