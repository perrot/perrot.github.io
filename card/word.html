<!--
http://www.w3schools.com/w3css/w3css_buttons.asp
http://www.w3schools.com/bootstrap/bootstrap_tabs_pills.asp
http://www.w3schools.com/jquery/jquery_hide_show.asp
http://www.w3schools.com/tags/tag_abbr.asp
file:///C:/Documents%20and%20Settings/Administrator/桌面/word.html?n=10
[TODO]
in show flash function play sound
keep a dict in local storage {0:12} {INDEX:SHOW_ANSWER_COUNT}
add answer budget
-->
<!DOCTYPE html>
<html>
<title>W3.CSS</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="http://www.w3schools.com/lib/w3.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<body>


  <div class="w3-card w3-container w3-padding-16" style="width:100%;">
    <div class="w3-row">
	  <a href="#" class="w3-col m6 w3-btn w3-padding-large w3-dark-grey " id="answer" style="width: 47%;
    margin-right: 16px;" >Answer</a>
	  <a href="#" style="width: 48%;" id="next" class="w3-col m6 w3-btn w3-padding-large w3-dark-grey">Next<span class="w3-badge w3-margin-left w3-white count"></span></a>
    <!--<div class="w3-col m6 w3-ripple" id="answer" ><a href="#" class="w3-btn w3-padding-large w3-dark-grey " style="width:100%">Answer</a></div >
    <div class="w3-col m6 w3-ripple" ><a href="tryw3css_examples_newspaper_space.html" target="_blank" id="next" class="w3-btn w3-padding-large w3-dark-grey" style="width:100%">Next</a></div >-->


  </div>
  <a href="main.html">Main</a>
    <header>
      <h1 id="sentence"></h1>
    </header>
      <p id="translate" style="font-size: x-large;"></p>
  </div>

<script src="word.js"></script>
<script>
$(document).ready(function(){
//	var str=`
//お<ruby>皿<rt>さら</rt></ruby>を<ruby>洗<rt>あら</rt></ruby>います。;洗碟子。
//<ruby>放送<rt>ほうそう</rt></ruby>を<ruby>聴<rt>き</rt></ruby>く。;聽廣播。
//<ruby>掃除<rt>そうじ</rt></ruby><ruby>器<rt>うつわ</rt></ruby>;吸尘器
//<ruby>仕事<rt>しごと</rt></ruby>を<ruby>始<rt>はじ</rt></ruby>める;开始工作。
//<ruby>田舎<rt>いなか</rt></ruby>に<ruby>住<rt>す</rt></ruby>む。;住在乡间。
//<ruby>彼女<rt>かのじょ</rt></ruby>は<ruby>買い物<rt>かいもの</rt></ruby>が<ruby>好き<rt>すき</rt></ruby>だ;她喜欢买东西。
//<ruby>又<rt>また</rt></ruby>の<ruby>名<rt>な</rt></ruby>;别名；别称
//`;
		//alert(window.location.href);
		var end=0;
		var tmp;
		if(window.location.href.indexOf('?')>-1){
			tmp=window.location.href.split('?')[1];
			if(tmp.indexOf('=')>-1){
				end=tmp.split('=')[1];
			}
		}
	console.log(str);
	var lines=str.split('\n');
	lines.splice(0, 1);
	lines.splice(-1, 1);
	console.log(lines);
	var linesIndex=[];
	var start=0
	if(end==0){
		end=lines.length;
		start=0;
	}else{
		if(end>10)
		start=end-10;
	}
	for(var i=start;i<end;i++){
		linesIndex.push(i);
	}
	linesIndex = shuffle(linesIndex);
	console.log(linesIndex);
	console.log('LEN:'+linesIndex.length);
	var curIndex=0;
	ShowFlash();
	function ShowFlash(){
		$('#translate').hide();
		$('.count').html(curIndex+1);
		var i=linesIndex[curIndex];
		if(i>-1 && i<lines.length){
		var line=lines[i].split(';');
		$('#sentence').html(line[0]);
		$('#translate').html(line[1]);
		curIndex++;
		if(currentIndex==linesIndex.length-1) $('#next').addClass('w3-disabled');
		}
	}
	$('#translate').hide();
	$('#answer').click(function(){
		$('#translate').toggle();
		});
	$('#next').click(function(){
		ShowFlash();
		});
	function shuffle(array) {
  var currentIndex = array.length, temporaryValue, randomIndex;

  // While there remain elements to shuffle...
  while (0 !== currentIndex) {

    // Pick a remaining element...
    randomIndex = Math.floor(Math.random() * currentIndex);
    currentIndex -= 1;

    // And swap it with the current element.
    temporaryValue = array[currentIndex];
    array[currentIndex] = array[randomIndex];
    array[randomIndex] = temporaryValue;
  }

  return array;
}
});
</script>
</body>
</html>
